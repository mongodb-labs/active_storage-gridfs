  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "posts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "posts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aactive_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aactive_storage_attachments_uniqueness" ON "aactive_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aactive_storage_attachments_on_blob_id" ON "aactive_storage_attachments" ("blob_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aactive_storage_attachments" ("id","name","record_type","record_id","blob_id","created_at")
                     SELECT "id","name","record_type","record_id","blob_id","created_at" FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("id","name","record_type","record_id","blob_id","created_at")
                     SELECT "id","name","record_type","record_id","blob_id","created_at" FROM "aactive_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aactive_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aactive_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aactive_storage_variant_records_uniqueness" ON "aactive_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aactive_storage_variant_records" ("id","blob_id","variation_digest")
                     SELECT "id","blob_id","variation_digest" FROM "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("id","blob_id","variation_digest")
                     SELECT "id","blob_id","variation_digest" FROM "aactive_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aactive_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251210194212)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251210193045);[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-10 19:53:18.022439', '2025-12-10 19:53:18.022439') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'f37a42f83afabd124219167ff6090ead4333ddca', '2025-12-10 19:53:18.022764', '2025-12-10 19:53:18.022764') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "8ggqy5fcei49wj2q8itjh54kruwq"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:53:18.090641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "8ggqy5fcei49wj2q8itjh54kruwq"], ["LIMIT", 1]]
[36m  GridFS Storage (9.5ms) [0m[32mUploaded file to key: 8ggqy5fcei49wj2q8itjh54kruwq (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "kwemsqhyvlsw11uhnhicqof6en4w"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:53:18.108257"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "kwemsqhyvlsw11uhnhicqof6en4w"], ["LIMIT", 1]]
[36m  GridFS Storage (3.1ms) [0m[32mUploaded file to key: kwemsqhyvlsw11uhnhicqof6en4w (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (2.8ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Ldwk5UTDGBPmyCauK52GnMBr"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: Ldwk5UTDGBPmyCauK52GnMBr[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: Ldwk5UTDGBPmyCauK52GnMBr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 19:53:18.142041"], ["updated_at", "2025-12-10 19:53:18.142041"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 19:53:39.095886"], ["updated_at", "2025-12-10 19:53:39.095886"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "npim8bueh9ghxx793dmychgwfiny"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:53:39.119541"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "npim8bueh9ghxx793dmychgwfiny"], ["LIMIT", 1]]
[36m  GridFS Storage (7.7ms) [0m[32mUploaded file to key: npim8bueh9ghxx793dmychgwfiny (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "2teuvg6x5fx8423fw3aosxrhqau1"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:53:39.129205"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2teuvg6x5fx8423fw3aosxrhqau1"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: 2teuvg6x5fx8423fw3aosxrhqau1 (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.8ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "DceEdMsLx5FPLghnkEvjXT1x"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: DceEdMsLx5FPLghnkEvjXT1x[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: DceEdMsLx5FPLghnkEvjXT1x[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (12.2ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p4Ve4m3GQVGr2bS8iwBRWZrF"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: p4Ve4m3GQVGr2bS8iwBRWZrF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 19:56:26.802567"], ["updated_at", "2025-12-10 19:56:26.802567"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "6sxsqthodxwmv4zloq8wy6vk86vs"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:56:26.811310"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "6sxsqthodxwmv4zloq8wy6vk86vs"], ["LIMIT", 1]]
[36m  GridFS Storage (9.2ms) [0m[32mUploaded file to key: 6sxsqthodxwmv4zloq8wy6vk86vs (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "2zurcu977ok1eu3cqnz47oth80nv"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 19:56:26.825159"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2zurcu977ok1eu3cqnz47oth80nv"], ["LIMIT", 1]]
[36m  GridFS Storage (5.7ms) [0m[32mUploaded file to key: 2zurcu977ok1eu3cqnz47oth80nv (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 19:59:37.169176"], ["updated_at", "2025-12-10 19:59:37.169176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:01:48.793071"], ["updated_at", "2025-12-10 20:01:48.793071"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:01:48 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 3.7ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:01:48 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:02:39.915245"], ["updated_at", "2025-12-10 20:02:39.915245"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:02:39 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.4ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:02:39 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:02:39 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010bb8e7a8 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-67803-puj5my.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[image]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:02:39.966200"], ["updated_at", "2025-12-10 20:02:39.966200"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:02:39 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 5.5ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 3.2ms | ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 5.3ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010dad1458 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-68208-s10hw4.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[image]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:03:00.068804"], ["updated_at", "2025-12-10 20:03:00.068804"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 3.9ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 0.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:03:00.098086"], ["updated_at", "2025-12-10 20:03:00.098086"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010be446f0 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-68208-l1c185.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[image]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.1ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:03:00.101146"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 1ms (ActiveRecord: 0.1ms (2 queries, 1 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:03:00 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:06:22.632818"], ["updated_at", "2025-12-10 20:06:22.632818"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.2ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010dd23120 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-70529-a36rn1.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[image]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.1ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:06:22.683975"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 1ms (ActiveRecord: 0.1ms (2 queries, 1 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 4.1ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010cafb830 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-70529-pq1k9m.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[image]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:06:22.709190"], ["updated_at", "2025-12-10 20:06:22.709190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:06:22 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:07:24.953880"], ["updated_at", "2025-12-10 20:07:24.953880"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:07:24 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.5ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:07:24 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:07:52 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 3.3ms | ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:07:52.831221"], ["updated_at", "2025-12-10 20:07:52.831221"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:07:52 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 3.3ms | ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010c5ba8d0 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-72696-wu49jt.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:08:24.776113"], ["updated_at", "2025-12-10 20:08:24.776113"]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "81xc85mz77r5z7p5tlouccwutebs"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:08:24.787620"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:08:24.787918"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:24.788092"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "81xc85mz77r5z7p5tlouccwutebs"], ["LIMIT", 1]]
[36m  GridFS Storage (4.8ms) [0m[32mUploaded file to key: 81xc85mz77r5z7p5tlouccwutebs (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:24.795917"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 24ms (ActiveRecord: 0.6ms (11 queries, 0 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.2ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: 81xc85mz77r5z7p5tlouccwutebs (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI4MXhjODVtejc3cjV6N3A1dGxvdWNjd3V0ZWJzIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjI0LjgwN1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--820f121b08d027ce1d11bcef6944ee3bda263b48/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: 81xc85mz77r5z7p5tlouccwutebs (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI4MXhjODVtejc3cjV6N3A1dGxvdWNjd3V0ZWJzIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjI0LjgwN1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--820f121b08d027ce1d11bcef6944ee3bda263b48/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI4MXhjODVtejc3cjV6N3A1dGxvdWNjd3V0ZWJzIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjI0LjgwN1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--820f121b08d027ce1d11bcef6944ee3bda263b48/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI4MXhjODVtejc3cjV6N3A1dGxvdWNjd3V0ZWJzIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjI0LjgwN1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--820f121b08d027ce1d11bcef6944ee3bda263b48/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: 81xc85mz77r5z7p5tlouccwutebs[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:08:24.810638"], ["updated_at", "2025-12-10 20:08:24.810638"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:08:24 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:08:34.125788"], ["updated_at", "2025-12-10 20:08:34.125788"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.4ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010a1c8620 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-72952-5vya8l.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:08:34.166394"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "rsu3ngc5otnwhz0es3ipajy5rz57"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:08:34.175041"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:08:34.175344"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:34.175517"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "rsu3ngc5otnwhz0es3ipajy5rz57"], ["LIMIT", 1]]
[36m  GridFS Storage (4.8ms) [0m[32mUploaded file to key: rsu3ngc5otnwhz0es3ipajy5rz57 (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:34.183109"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 21ms (ActiveRecord: 0.5ms (12 queries, 1 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.2ms)
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x0000000109f23fc8 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-72952-jgeioh.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:08:34.195806"], ["updated_at", "2025-12-10 20:08:34.195806"]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ev40m33vagj2f97wqsoohxfh9hgw"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:08:34.196679"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:08:34.196899"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:34.197047"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "ev40m33vagj2f97wqsoohxfh9hgw"], ["LIMIT", 1]]
[36m  GridFS Storage (3.0ms) [0m[32mUploaded file to key: ev40m33vagj2f97wqsoohxfh9hgw (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:34.201058"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 7ms (ActiveRecord: 0.3ms (11 queries, 0 cached) | GC: 0.1ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: ev40m33vagj2f97wqsoohxfh9hgw (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJldjQwbTMzdmFnajJmOTd3cXNvb2h4Zmg5aGd3IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjM0LjIwNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c96ee9ac7001633ce0eba21309a42abd9194da67/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: ev40m33vagj2f97wqsoohxfh9hgw (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJldjQwbTMzdmFnajJmOTd3cXNvb2h4Zmg5aGd3IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjM0LjIwNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c96ee9ac7001633ce0eba21309a42abd9194da67/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJldjQwbTMzdmFnajJmOTd3cXNvb2h4Zmg5aGd3IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjM0LjIwNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c96ee9ac7001633ce0eba21309a42abd9194da67/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJldjQwbTMzdmFnajJmOTd3cXNvb2h4Zmg5aGd3IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjM0LjIwNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c96ee9ac7001633ce0eba21309a42abd9194da67/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:08:34 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: ev40m33vagj2f97wqsoohxfh9hgw[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:08:57.241970"], ["updated_at", "2025-12-10 20:08:57.241970"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.3ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010c6ef8e0 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73369-x4hty5.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:08:57.282788"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "c7nm5u53xl4350pffmbwc5aamd3l"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:08:57.291726"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:08:57.292061"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:57.292240"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "c7nm5u53xl4350pffmbwc5aamd3l"], ["LIMIT", 1]]
[36m  GridFS Storage (4.8ms) [0m[32mUploaded file to key: c7nm5u53xl4350pffmbwc5aamd3l (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:57.299821"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 21ms (ActiveRecord: 0.5ms (12 queries, 1 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | GC: 3.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 3.4ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 3.4ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: c7nm5u53xl4350pffmbwc5aamd3l (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJjN25tNXU1M3hsNDM1MHBmZm1id2M1YWFtZDNsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMxMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--61273cb824865cb6e478022dde029aa7937e3f05/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: c7nm5u53xl4350pffmbwc5aamd3l (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJjN25tNXU1M3hsNDM1MHBmZm1id2M1YWFtZDNsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMxMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--61273cb824865cb6e478022dde029aa7937e3f05/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJjN25tNXU1M3hsNDM1MHBmZm1id2M1YWFtZDNsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMxMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--61273cb824865cb6e478022dde029aa7937e3f05/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJjN25tNXU1M3hsNDM1MHBmZm1id2M1YWFtZDNsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMxMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--61273cb824865cb6e478022dde029aa7937e3f05/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.5ms) [0m[34mDownloaded file from key: c7nm5u53xl4350pffmbwc5aamd3l[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010cf0d810 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73369-1pqts1.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:08:57.317839"], ["updated_at", "2025-12-10 20:08:57.317839"]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "k2hvcb6vjx4hptttfe8parcma44v"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:08:57.318799"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:08:57.319035"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:57.319185"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "k2hvcb6vjx4hptttfe8parcma44v"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: k2hvcb6vjx4hptttfe8parcma44v (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:08:57.322575"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 6ms (ActiveRecord: 0.3ms (11 queries, 0 cached) | GC: 0.1ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: k2hvcb6vjx4hptttfe8parcma44v (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJrMmh2Y2I2dmp4NGhwdHR0ZmU4cGFyY21hNDR2IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMyNloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--398c17e2fd434c55b2ae182a0adb81635e168377/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: k2hvcb6vjx4hptttfe8parcma44v (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJrMmh2Y2I2dmp4NGhwdHR0ZmU4cGFyY21hNDR2IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMyNloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--398c17e2fd434c55b2ae182a0adb81635e168377/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJrMmh2Y2I2dmp4NGhwdHR0ZmU4cGFyY21hNDR2IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMyNloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--398c17e2fd434c55b2ae182a0adb81635e168377/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 0ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJrMmh2Y2I2dmp4NGhwdHR0ZmU4cGFyY21hNDR2IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjEzOjU3LjMyNloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--398c17e2fd434c55b2ae182a0adb81635e168377/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:08:57 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: k2hvcb6vjx4hptttfe8parcma44v[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:09:07.229759"], ["updated_at", "2025-12-10 20:09:07.229759"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.2ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010a11aed0 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73640-zlcn1b.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:09:07.270391"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "wrsilcd6zudrclowm25m9w9avyrd"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:09:07.279151"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:09:07.279455"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:07.279634"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "wrsilcd6zudrclowm25m9w9avyrd"], ["LIMIT", 1]]
[36m  GridFS Storage (4.8ms) [0m[32mUploaded file to key: wrsilcd6zudrclowm25m9w9avyrd (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:07.287628"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 21ms (ActiveRecord: 0.5ms (12 queries, 1 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.2ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: wrsilcd6zudrclowm25m9w9avyrd (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ3cnNpbGNkNnp1ZHJjbG93bTI1bTl3OWF2eXJkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjI5OFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--39668165814a03b328c5117d571c398fe2678bbe/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: wrsilcd6zudrclowm25m9w9avyrd (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ3cnNpbGNkNnp1ZHJjbG93bTI1bTl3OWF2eXJkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjI5OFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--39668165814a03b328c5117d571c398fe2678bbe/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ3cnNpbGNkNnp1ZHJjbG93bTI1bTl3OWF2eXJkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjI5OFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--39668165814a03b328c5117d571c398fe2678bbe/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ3cnNpbGNkNnp1ZHJjbG93bTI1bTl3OWF2eXJkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjI5OFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--39668165814a03b328c5117d571c398fe2678bbe/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (5.0ms) [0m[34mDownloaded file from key: wrsilcd6zudrclowm25m9w9avyrd[0m
Completed 200 OK in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010a977308 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73640-ogqzzb.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:09:07.332646"], ["updated_at", "2025-12-10 20:09:07.332646"]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "1gilv1wsuhsccxc8zf9gel6ae8hd"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:09:07.333874"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:09:07.334151"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:07.334331"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "1gilv1wsuhsccxc8zf9gel6ae8hd"], ["LIMIT", 1]]
[36m  GridFS Storage (3.6ms) [0m[32mUploaded file to key: 1gilv1wsuhsccxc8zf9gel6ae8hd (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:07.339410"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 8ms (ActiveRecord: 0.4ms (11 queries, 0 cached) | GC: 0.2ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: 1gilv1wsuhsccxc8zf9gel6ae8hd (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiIxZ2lsdjF3c3Voc2NjeGM4emY5Z2VsNmFlOGhkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjM0M1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--2244e9a4b7b4e02a6803d84535d0c80306711b32/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: 1gilv1wsuhsccxc8zf9gel6ae8hd (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiIxZ2lsdjF3c3Voc2NjeGM4emY5Z2VsNmFlOGhkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjM0M1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--2244e9a4b7b4e02a6803d84535d0c80306711b32/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiIxZ2lsdjF3c3Voc2NjeGM4emY5Z2VsNmFlOGhkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjM0M1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--2244e9a4b7b4e02a6803d84535d0c80306711b32/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 0ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiIxZ2lsdjF3c3Voc2NjeGM4emY5Z2VsNmFlOGhkIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjA3LjM0M1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--2244e9a4b7b4e02a6803d84535d0c80306711b32/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:09:07 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (2.1ms) [0m[34mDownloaded file from key: 1gilv1wsuhsccxc8zf9gel6ae8hd[0m
Completed 200 OK in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 3.2ms | ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010cfebbd8 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73852-jokj9p.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 20:09:12.381955"], ["updated_at", "2025-12-10 20:09:12.381955"]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "o3z9i7me99uz6s6ulz6cjljswgp2"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:09:12.393669"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:09:12.393969"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:12.394154"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "o3z9i7me99uz6s6ulz6cjljswgp2"], ["LIMIT", 1]]
[36m  GridFS Storage (4.7ms) [0m[32mUploaded file to key: o3z9i7me99uz6s6ulz6cjljswgp2 (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:12.401813"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 24ms (ActiveRecord: 0.6ms (11 queries, 0 cached) | GC: 0.0ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.5ms | GC: 3.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 3.4ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 3.4ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: o3z9i7me99uz6s6ulz6cjljswgp2 (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJvM3o5aTdtZTk5dXo2czZ1bHo2Y2psanN3Z3AyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQxM1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--0e859d48c06c3c7037cb018c2726871760ff51d7/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: o3z9i7me99uz6s6ulz6cjljswgp2 (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJvM3o5aTdtZTk5dXo2czZ1bHo2Y2psanN3Z3AyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQxM1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--0e859d48c06c3c7037cb018c2726871760ff51d7/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJvM3o5aTdtZTk5dXo2czZ1bHo2Y2psanN3Z3AyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQxM1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--0e859d48c06c3c7037cb018c2726871760ff51d7/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJvM3o5aTdtZTk5dXo2czZ1bHo2Y2psanN3Z3AyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQxM1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--0e859d48c06c3c7037cb018c2726871760ff51d7/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: o3z9i7me99uz6s6ulz6cjljswgp2[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 20:09:12.416539"], ["updated_at", "2025-12-10 20:09:12.416539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010d5c8d08 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-73852-q9ug32.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.1ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 20:09:12.421102"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "sj4yrdir4ktq99yvsqeo7qz727pa"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 20:09:12.421937"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 20:09:12.422159"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:12.422308"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "sj4yrdir4ktq99yvsqeo7qz727pa"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: sj4yrdir4ktq99yvsqeo7qz727pa (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 20:09:12.425860"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 6ms (ActiveRecord: 0.3ms (12 queries, 1 cached) | GC: 0.1ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms (3 queries, 0 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: sj4yrdir4ktq99yvsqeo7qz727pa (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzajR5cmRpcjRrdHE5OXl2c3FlbzdxejcyN3BhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQyOVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--687fb4ca8e2254c7d434735380a56f6dc23a3934/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: sj4yrdir4ktq99yvsqeo7qz727pa (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzajR5cmRpcjRrdHE5OXl2c3FlbzdxejcyN3BhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQyOVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--687fb4ca8e2254c7d434735380a56f6dc23a3934/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzajR5cmRpcjRrdHE5OXl2c3FlbzdxejcyN3BhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQyOVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--687fb4ca8e2254c7d434735380a56f6dc23a3934/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 0ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzajR5cmRpcjRrdHE5OXl2c3FlbzdxejcyN3BhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIwOjE0OjEyLjQyOVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--687fb4ca8e2254c7d434735380a56f6dc23a3934/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 15:09:12 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: sj4yrdir4ktq99yvsqeo7qz727pa[0m
Completed 200 OK in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "sgad3hbf8mnpmsjmxh1tpt95ifdl"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 20:13:53.743772"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "sgad3hbf8mnpmsjmxh1tpt95ifdl"], ["LIMIT", 1]]
[36m  GridFS Storage (6.5ms) [0m[32mUploaded file to key: sgad3hbf8mnpmsjmxh1tpt95ifdl (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "dnbdc1oj7gzi50n1j6d2n5wn0sk7"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 20:13:53.757103"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "dnbdc1oj7gzi50n1j6d2n5wn0sk7"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: dnbdc1oj7gzi50n1j6d2n5wn0sk7 (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "uffmg7y8zjpta1ocvl52s9udelny"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 20:14:58.940821"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "uffmg7y8zjpta1ocvl52s9udelny"], ["LIMIT", 1]]
[36m  GridFS Storage (7.9ms) [0m[32mUploaded file to key: uffmg7y8zjpta1ocvl52s9udelny (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started PUT "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ1ZmZtZzd5OHpqcHRhMW9jdmw1MnM5dWRlbG55IiwiY2hlY2tzdW0iOiJscS9oWS9hZzRSakpuNVNMR1Z3N0VRPT0iLCJjb250ZW50X3R5cGUiOiJ0ZXh0L3BsYWluIiwiY29udGVudF9sZW5ndGgiOjE0fSwicHVyIjoiYmxvYl90b2tlbiJ9fQ==--f289cc1ab8ec18d3a79ed33a4043ecb77d2d1e34" for 127.0.0.1 at 2025-12-10 15:14:58 -0500
Processing by ActiveStorage::GridfsController#update as HTML
  Parameters: {"encoded_token"=>"[FILTERED]"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "uffmg7y8zjpta1ocvl52s9udelny"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: uffmg7y8zjpta1ocvl52s9udelny (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Completed 204 No Content in 4ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: uffmg7y8zjpta1ocvl52s9udelny[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ob88o87384kxq8piy3c2vo3qxol0"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 20:14:58.979380"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "ob88o87384kxq8piy3c2vo3qxol0"], ["LIMIT", 1]]
[36m  GridFS Storage (1.5ms) [0m[32mUploaded file to key: ob88o87384kxq8piy3c2vo3qxol0 (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJvYjg4bzg3Mzg0a3hxOHBpeTNjMnZvM3F4b2wwIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cImdyZWV0aW5nLnR4dFwiIiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--808471e1b4e98ea590a5d3e6caa50f54b3cf2afc/greeting.txt" for 127.0.0.1 at 2025-12-10 15:14:58 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"greeting"}
[36m  GridFS Storage (1.3ms) [0m[34mDownloaded file from key: ob88o87384kxq8piy3c2vo3qxol0[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (11.7ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (2.8ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.2ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7P9Qh51zz3mt4W5jYqBRWYFy"], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[32mUploaded file to key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 7P9Qh51zz3mt4W5jYqBRWYFy[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (96.3ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "eHZQmEQCUq1K9gbhxBBWt1zr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: eHZQmEQCUq1K9gbhxBBWt1zr (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.5ms) [0m[34mDownloaded file from key: eHZQmEQCUq1K9gbhxBBWt1zr[0m
[36m  GridFS Storage (2.5ms) [0m[31mDeleted file from key: eHZQmEQCUq1K9gbhxBBWt1zr[0m
[36m  GridFS Storage (2.3ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (3.3ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Uoby3hmKxB8ekusn6uncmBRG"], ["LIMIT", 1]]
[36m  GridFS Storage (31.0ms) [0m[32mUploaded file to key: Uoby3hmKxB8ekusn6uncmBRG[0m
[36m  GridFS Storage (24.1ms) [0m[34mDownloaded file from key: Uoby3hmKxB8ekusn6uncmBRG[0m
[36m  GridFS Storage (5.2ms) [0m[31mDeleted file from key: Uoby3hmKxB8ekusn6uncmBRG[0m
[36m  GridFS Storage (3.7ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (4.9ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (3.8ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.6ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: VX2FGs2kvUM8bXPgrBgroYTf[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: 53ZZyQ5sagp2ioEgykMtJ335 (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: 53ZZyQ5sagp2ioEgykMtJ335nonsense (no)[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nRtyQ3wvtL6brm6QoVsyyGZR"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: nRtyQ3wvtL6brm6QoVsyyGZR (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: nRtyQ3wvtL6brm6QoVsyyGZR[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (0.8ms) [0m[34mDownloaded file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "53ZZyQ5sagp2ioEgykMtJ335"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: 53ZZyQ5sagp2ioEgykMtJ335 (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: 53ZZyQ5sagp2ioEgykMtJ335[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (17.3ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: MSsj67hQWWxqkDjx6ChF2PFr (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: MSsj67hQWWxqkDjx6ChF2PFrnonsense (no)[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "kYRh874qgixWU2xUVSX54qv7"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: kYRh874qgixWU2xUVSX54qv7 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (0.8ms) [0m[34mDownloaded file from key: kYRh874qgixWU2xUVSX54qv7[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: kYRh874qgixWU2xUVSX54qv7[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.5ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (5.8ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "hUtKcVPsk9WqbKq8q7ZrV4G9"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: hUtKcVPsk9WqbKq8q7ZrV4G9 (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: hUtKcVPsk9WqbKq8q7ZrV4G9[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: raRF8WMzdGnUdmzgAxTPHMKM[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: MSsj67hQWWxqkDjx6ChF2PFr (no)[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "MSsj67hQWWxqkDjx6ChF2PFr"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: MSsj67hQWWxqkDjx6ChF2PFr[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: MSsj67hQWWxqkDjx6ChF2PFr[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (17.3ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: wyi4c5pV23bDzZeKYkQw8Pw6[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (3.6ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: nMN3bAecjGaK3zZ99XhgZosw (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: 8azes3AVUHYjWtiEF3hJbEss (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 8azes3AVUHYjWtiEF3hJbEss[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (3.3ms) [0m[34mChecked if file exists at key: nMN3bAecjGaK3zZ99XhgZosw (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: nMN3bAecjGaK3zZ99XhgZoswnonsense (no)[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: Hb9GBGEKSx1fEPGU9bkxoFB6 (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: Hb9GBGEKSx1fEPGU9bkxoFB6[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.2ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "nMN3bAecjGaK3zZ99XhgZosw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: nMN3bAecjGaK3zZ99XhgZosw[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: nMN3bAecjGaK3zZ99XhgZosw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (16.6ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (0.8ms) [0m[34mChecked if file exists at key: n3LXAFAba5pXojaJi19pYeav (yes)[0m
[36m  GridFS Storage (1.1ms) [0m[34mChecked if file exists at key: n3LXAFAba5pXojaJi19pYeavnonsense (no)[0m
[36m  GridFS Storage (2.4ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.9ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "Qvq2uMNBbDHcRbmg7ubXm5pV"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: Qvq2uMNBbDHcRbmg7ubXm5pV (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: Qvq2uMNBbDHcRbmg7ubXm5pV[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: Qvq2uMNBbDHcRbmg7ubXm5pV[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 4chKDqpiHQFyFr5Cq3aD2FjG[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: LqW9ZSe2avSJBRDTqKgDt4gd (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: LqW9ZSe2avSJBRDTqKgDt4gd (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: LqW9ZSe2avSJBRDTqKgDt4gd[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "n3LXAFAba5pXojaJi19pYeav"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: n3LXAFAba5pXojaJi19pYeav (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: n3LXAFAba5pXojaJi19pYeav[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (17.6ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "EyUDJCHyhWLNGgY8yoGjKjat"], ["LIMIT", 1]]
[36m  GridFS Storage (25.1ms) [0m[32mUploaded file to key: EyUDJCHyhWLNGgY8yoGjKjat[0m
[36m  GridFS Storage (21.2ms) [0m[34mDownloaded file from key: EyUDJCHyhWLNGgY8yoGjKjat[0m
[36m  GridFS Storage (6.0ms) [0m[31mDeleted file from key: EyUDJCHyhWLNGgY8yoGjKjat[0m
[36m  GridFS Storage (4.1ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (4.3ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (3.8ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p6fbS5DN8JRHEpdCeVKFSwk9"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: p6fbS5DN8JRHEpdCeVKFSwk9 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: p6fbS5DN8JRHEpdCeVKFSwk9[0m
[36m  GridFS Storage (2.1ms) [0m[31mDeleted file from key: p6fbS5DN8JRHEpdCeVKFSwk9[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (0.6ms) [0m[34mChecked if file exists at key: 96W8BgvBXYRjbiKcyvpiijyj (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (3.0ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: zcHj1NXW2KQ4JMNFEST1314C[0m
[36m  GridFS Storage (2.7ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (3.5ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (3.8ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.6ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (5.3ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (3.0ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: 96W8BgvBXYRjbiKcyvpiijyj (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: 96W8BgvBXYRjbiKcyvpiijyjnonsense (no)[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: YCPdg3S1YG2AbGuwFdquu8zX (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: YCPdg3S1YG2AbGuwFdquu8zX (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: YCPdg3S1YG2AbGuwFdquu8zX[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "96W8BgvBXYRjbiKcyvpiijyj"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: 96W8BgvBXYRjbiKcyvpiijyj[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 96W8BgvBXYRjbiKcyvpiijyj[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (16.8ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (3.1ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "uUTVGw6YYpa58EppZdN8enwF"], ["LIMIT", 1]]
[36m  GridFS Storage (6.9ms) [0m[32mUploaded file to key: uUTVGw6YYpa58EppZdN8enwF[0m
[36m  GridFS Storage (2.3ms) [0m[34mDownloaded file from key: uUTVGw6YYpa58EppZdN8enwF[0m
[36m  GridFS Storage (2.4ms) [0m[31mDeleted file from key: uUTVGw6YYpa58EppZdN8enwF[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (4.5ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: 3fbRXafLUEfdNoAqTLjJBuZZ (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.8ms) [0m[34mChecked if file exists at key: 3fbRXafLUEfdNoAqTLjJBuZZ (no)[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: 3fbRXafLUEfdNoAqTLjJBuZZ[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (3.2ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (0.7ms) [0m[34mChecked if file exists at key: 9Jz5dDtx9JyvAUyoHcvx9x1G (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: 9Jz5dDtx9JyvAUyoHcvx9x1Gnonsense (no)[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (7.9ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: p6DJh4Sobad68NAyFayLFPxk[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (2.1ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: 9Jz5dDtx9JyvAUyoHcvx9x1G (no)[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (3.1ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "aciBe1UZtFHZmhjgAYGc7JuX"], ["LIMIT", 1]]
[36m  GridFS Storage (1.6ms) [0m[32mUploaded file to key: aciBe1UZtFHZmhjgAYGc7JuX (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: aciBe1UZtFHZmhjgAYGc7JuX[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: aciBe1UZtFHZmhjgAYGc7JuX[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "9Jz5dDtx9JyvAUyoHcvx9x1G"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 9Jz5dDtx9JyvAUyoHcvx9x1G[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (17.0ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (3.7ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (3.0ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: gsk6A9rLvFdWmK751vghp2Sw (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: gsk6A9rLvFdWmK751vghp2Swnonsense (no)[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "ePLAebmuZE59G7cDCRaYVcX1"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: ePLAebmuZE59G7cDCRaYVcX1 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (4.8ms) [0m[34mDownloaded file from key: ePLAebmuZE59G7cDCRaYVcX1[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: ePLAebmuZE59G7cDCRaYVcX1[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "F6QsQZPBHju6yd6eRtS8DAKm"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: F6QsQZPBHju6yd6eRtS8DAKm[0m
[36m  GridFS Storage (0.7ms) [0m[34mDownloaded file from key: F6QsQZPBHju6yd6eRtS8DAKm[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: F6QsQZPBHju6yd6eRtS8DAKm[0m
[36m  GridFS Storage (12.9ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (3.2ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: pKHBy12eiBNFTcSNnHxKfr2u (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.6ms) [0m[34mChecked if file exists at key: pKHBy12eiBNFTcSNnHxKfr2u (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: pKHBy12eiBNFTcSNnHxKfr2u[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (3.2ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: gsk6A9rLvFdWmK751vghp2Sw (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "gsk6A9rLvFdWmK751vghp2Sw"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: gsk6A9rLvFdWmK751vghp2Sw[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: D9FZEgSWmBUke4AhB2eK36Pn[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: gsk6A9rLvFdWmK751vghp2Sw[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (16.0ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: t3jDUUuGERHEg5wu63VanWxF (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: t3jDUUuGERHEg5wu63VanWxF (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: t3jDUUuGERHEg5wu63VanWxF[0m
[36m  GridFS Storage (6.9ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (3.5ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: H5ZE7dEyTEoWGDa33kn8dQXg[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (2.9ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (2.1ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.6ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (5.1ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: pT2TQgJrdE3ZULKfpXDyDw7H (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: pT2TQgJrdE3ZULKfpXDyDw7H (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: pT2TQgJrdE3ZULKfpXDyDw7Hnonsense (no)[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "TR45fFCJgvHBXJ9eKnAEZ1n2"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: TR45fFCJgvHBXJ9eKnAEZ1n2 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: TR45fFCJgvHBXJ9eKnAEZ1n2[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: TR45fFCJgvHBXJ9eKnAEZ1n2[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "X7xW47NQBNTaMpvv4gYqESQZ"], ["LIMIT", 1]]
[36m  GridFS Storage (35.1ms) [0m[32mUploaded file to key: X7xW47NQBNTaMpvv4gYqESQZ[0m
[36m  GridFS Storage (8.8ms) [0m[34mDownloaded file from key: X7xW47NQBNTaMpvv4gYqESQZ[0m
[36m  GridFS Storage (4.2ms) [0m[31mDeleted file from key: X7xW47NQBNTaMpvv4gYqESQZ[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "pT2TQgJrdE3ZULKfpXDyDw7H"], ["LIMIT", 1]]
[36m  GridFS Storage (4.2ms) [0m[32mUploaded file to key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
[36m  GridFS Storage (2.5ms) [0m[31mDeleted file from key: pT2TQgJrdE3ZULKfpXDyDw7H[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (17.4ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: dGTUYi9YsYjAr7FqSAp3FPAc (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.8ms) [0m[34mChecked if file exists at key: dGTUYi9YsYjAr7FqSAp3FPAc (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: dGTUYi9YsYjAr7FqSAp3FPAc[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: UiBtdw1fJZJ9W6637Rj4KAiL (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: UiBtdw1fJZJ9W6637Rj4KAiLnonsense (no)[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "U2QdfepXcYM1ks4KiUvzwvQT"], ["LIMIT", 1]]
[36m  GridFS Storage (23.9ms) [0m[32mUploaded file to key: U2QdfepXcYM1ks4KiUvzwvQT[0m
[36m  GridFS Storage (21.4ms) [0m[34mDownloaded file from key: U2QdfepXcYM1ks4KiUvzwvQT[0m
[36m  GridFS Storage (2.2ms) [0m[31mDeleted file from key: U2QdfepXcYM1ks4KiUvzwvQT[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "1UnugCSePZstfQLxYJRMz6P1"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: 1UnugCSePZstfQLxYJRMz6P1 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (0.7ms) [0m[34mDownloaded file from key: 1UnugCSePZstfQLxYJRMz6P1[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: 1UnugCSePZstfQLxYJRMz6P1[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: 8ZqcZ78T8aSGAoFdRoFFw94j[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (5.6ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.1ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "UiBtdw1fJZJ9W6637Rj4KAiL"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: UiBtdw1fJZJ9W6637Rj4KAiL (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: UiBtdw1fJZJ9W6637Rj4KAiL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (17.7ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: 2DC327Wn8MQZKwjsWAFGAwD6 (no)[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "KkifFGQ9PR5P3YPniUFUTFRW"], ["LIMIT", 1]]
[36m  GridFS Storage (22.9ms) [0m[32mUploaded file to key: KkifFGQ9PR5P3YPniUFUTFRW[0m
[36m  GridFS Storage (20.4ms) [0m[34mDownloaded file from key: KkifFGQ9PR5P3YPniUFUTFRW[0m
[36m  GridFS Storage (2.6ms) [0m[31mDeleted file from key: KkifFGQ9PR5P3YPniUFUTFRW[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: 7hS7YZ5hEv4LCuCEbUZSfYFE (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: 7hS7YZ5hEv4LCuCEbUZSfYFE (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: 7hS7YZ5hEv4LCuCEbUZSfYFE[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.7ms) [0m[34mDownloaded file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: veask69hwKVNsLBt6fSfkLF2[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (5.8ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (5.7ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
[36m  GridFS Storage (0.8ms) [0m[34mChecked if file exists at key: 2DC327Wn8MQZKwjsWAFGAwD6 (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: 2DC327Wn8MQZKwjsWAFGAwD6nonsense (no)[0m
[36m  GridFS Storage (2.9ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2DC327Wn8MQZKwjsWAFGAwD6"], ["LIMIT", 1]]
[36m  GridFS Storage (5.5ms) [0m[32mUploaded file to key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fDb6iTeJ7f6kwmwYqZcgfguH"], ["LIMIT", 1]]
[36m  GridFS Storage (2.9ms) [0m[32mUploaded file to key: fDb6iTeJ7f6kwmwYqZcgfguH (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: fDb6iTeJ7f6kwmwYqZcgfguH[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: fDb6iTeJ7f6kwmwYqZcgfguH[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 2DC327Wn8MQZKwjsWAFGAwD6[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (16.2ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: xuTC4zuV5XJrj2YcvszyBECi (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: xuTC4zuV5XJrj2YcvszyBECi (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: xuTC4zuV5XJrj2YcvszyBECi[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.9ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "bvcxWtjA5n9cpq23fSuxMsEf"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: bvcxWtjA5n9cpq23fSuxMsEf (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (0.8ms) [0m[34mDownloaded file from key: bvcxWtjA5n9cpq23fSuxMsEf[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: bvcxWtjA5n9cpq23fSuxMsEf[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: yCnHqZh3J9qcHGhdEVDRQ6gY[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: 67Jaiqq1xWCcUsFk2YbneCyJ (yes)[0m
[36m  GridFS Storage (3.2ms) [0m[34mChecked if file exists at key: 67Jaiqq1xWCcUsFk2YbneCyJnonsense (no)[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (1.1ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "2kdUb9MF688Cvc57WQ3QDNZ3"], ["LIMIT", 1]]
[36m  GridFS Storage (34.7ms) [0m[32mUploaded file to key: 2kdUb9MF688Cvc57WQ3QDNZ3[0m
[36m  GridFS Storage (10.1ms) [0m[34mDownloaded file from key: 2kdUb9MF688Cvc57WQ3QDNZ3[0m
[36m  GridFS Storage (4.0ms) [0m[31mDeleted file from key: 2kdUb9MF688Cvc57WQ3QDNZ3[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (4.9ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (2.2ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (0.6ms) [0m[34mChecked if file exists at key: 67Jaiqq1xWCcUsFk2YbneCyJ (no)[0m
[36m  GridFS Storage (0.7ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "67Jaiqq1xWCcUsFk2YbneCyJ"], ["LIMIT", 1]]
[36m  GridFS Storage (3.4ms) [0m[32mUploaded file to key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (1.3ms) [0m[34mDownloaded file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted file from key: 67Jaiqq1xWCcUsFk2YbneCyJ[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (17.5ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.9ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "PmqVRcqDqktgvkn9Uf3GK31X"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: PmqVRcqDqktgvkn9Uf3GK31X (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: PmqVRcqDqktgvkn9Uf3GK31X[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: PmqVRcqDqktgvkn9Uf3GK31X[0m
[36m  GridFS Storage (2.4ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (4.7ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (1.8ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: pGJYaTkSNrq9VibkarKdxzNK (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: pGJYaTkSNrq9VibkarKdxzNK (no)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: pGJYaTkSNrq9VibkarKdxzNK[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (3.0ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "wb4hYtMmXFXMKNnLq5syuRj1"], ["LIMIT", 1]]
[36m  GridFS Storage (34.2ms) [0m[32mUploaded file to key: wb4hYtMmXFXMKNnLq5syuRj1[0m
[36m  GridFS Storage (27.2ms) [0m[34mDownloaded file from key: wb4hYtMmXFXMKNnLq5syuRj1[0m
[36m  GridFS Storage (27.3ms) [0m[34mDownloaded file from key: wb4hYtMmXFXMKNnLq5syuRj1[0m
[36m  GridFS Storage (2.4ms) [0m[31mDeleted file from key: wb4hYtMmXFXMKNnLq5syuRj1[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.2ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.2ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: cWK5tDFBFhWCkz5Nz3FBE9x5 (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: cWK5tDFBFhWCkz5Nz3FBE9x5 (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: cWK5tDFBFhWCkz5Nz3FBE9x5nonsense (no)[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "cWK5tDFBFhWCkz5Nz3FBE9x5"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: 6xdVvsTe8z81ERnBJnfAkyK7[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: cWK5tDFBFhWCkz5Nz3FBE9x5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 16:20:28 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 3.9ms | ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010e5bf518 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-23897-sk02bl.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 21:20:29.041332"], ["updated_at", "2025-12-10 21:20:29.041332"]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ravepmk0cgvl31de00ggnxwbs9mx"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 21:20:29.053839"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 21:20:29.054145"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:29.054332"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "ravepmk0cgvl31de00ggnxwbs9mx"], ["LIMIT", 1]]
[36m  GridFS Storage (6.9ms) [0m[32mUploaded file to key: ravepmk0cgvl31de00ggnxwbs9mx (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:29.068289"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 31ms (ActiveRecord: 0.7ms (11 queries, 0 cached) | GC: 3.8ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.1ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: ravepmk0cgvl31de00ggnxwbs9mx (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJyYXZlcG1rMGNndmwzMWRlMDBnZ254d2JzOW14IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA4MFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--242eef5ddd09befdceb0f33b77ff7be8ed2f12ef/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: ravepmk0cgvl31de00ggnxwbs9mx (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJyYXZlcG1rMGNndmwzMWRlMDBnZ254d2JzOW14IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA4MFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--242eef5ddd09befdceb0f33b77ff7be8ed2f12ef/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJyYXZlcG1rMGNndmwzMWRlMDBnZ254d2JzOW14IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA4MFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--242eef5ddd09befdceb0f33b77ff7be8ed2f12ef/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJyYXZlcG1rMGNndmwzMWRlMDBnZ254d2JzOW14IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA4MFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--242eef5ddd09befdceb0f33b77ff7be8ed2f12ef/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.3ms) [0m[34mDownloaded file from key: ravepmk0cgvl31de00ggnxwbs9mx[0m
Completed 200 OK in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 21:20:29.084403"], ["updated_at", "2025-12-10 21:20:29.084403"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010edf7230 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-23897-lhdu7o.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.1ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 21:20:29.089086"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "6s8lgj01nqmarrg9fvb5vp9uj8ca"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 21:20:29.090072"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 21:20:29.090297"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:29.090448"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "6s8lgj01nqmarrg9fvb5vp9uj8ca"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: 6s8lgj01nqmarrg9fvb5vp9uj8ca (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:29.094018"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 7ms (ActiveRecord: 0.4ms (12 queries, 1 cached) | GC: 0.2ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.6ms | GC: 0.1ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.8ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.1ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: 6s8lgj01nqmarrg9fvb5vp9uj8ca (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI2czhsZ2owMW5xbWFycmc5ZnZiNXZwOXVqOGNhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA5N1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--249372d2841342de41e7a4e45ce620fc11d7b6d9/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: 6s8lgj01nqmarrg9fvb5vp9uj8ca (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI2czhsZ2owMW5xbWFycmc5ZnZiNXZwOXVqOGNhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA5N1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--249372d2841342de41e7a4e45ce620fc11d7b6d9/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI2czhsZ2owMW5xbWFycmc5ZnZiNXZwOXVqOGNhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA5N1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--249372d2841342de41e7a4e45ce620fc11d7b6d9/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 0ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiI2czhsZ2owMW5xbWFycmc5ZnZiNXZwOXVqOGNhIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjI5LjA5N1oiLCJwdXIiOiJibG9iX2tleSJ9fQ==--249372d2841342de41e7a4e45ce620fc11d7b6d9/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: 6s8lgj01nqmarrg9fvb5vp9uj8ca[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (5.1ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (1.7ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.9ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (0.9ms) [0m[31mDeleted file from key: VaDEcewaZE6fp43CPff7E88p[0m
[36m  GridFS Storage (2.3ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: JnYSoaZUvnVMyMLhJqPdgVu5 (yes)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: JnYSoaZUvnVMyMLhJqPdgVu5nonsense (no)[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "yEEkNnw2ttgvbZnc9QWyQ6Vk"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: yEEkNnw2ttgvbZnc9QWyQ6Vk (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: yEEkNnw2ttgvbZnc9QWyQ6Vk[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: yEEkNnw2ttgvbZnc9QWyQ6Vk[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "p5AUjUarsjGdQvkQ1Z3ydrcU"], ["LIMIT", 1]]
[36m  GridFS Storage (39.5ms) [0m[32mUploaded file to key: p5AUjUarsjGdQvkQ1Z3ydrcU[0m
[36m  GridFS Storage (33.0ms) [0m[34mDownloaded file from key: p5AUjUarsjGdQvkQ1Z3ydrcU[0m
[36m  GridFS Storage (33.1ms) [0m[34mDownloaded file from key: p5AUjUarsjGdQvkQ1Z3ydrcU[0m
[36m  GridFS Storage (2.4ms) [0m[31mDeleted file from key: p5AUjUarsjGdQvkQ1Z3ydrcU[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (1.9ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.3ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (1.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (1.0ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (3.7ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: 9y4mpYvkJWp2WxucgQAyt4BU (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: 9y4mpYvkJWp2WxucgQAyt4BU (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: 9y4mpYvkJWp2WxucgQAyt4BU[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.6ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "JnYSoaZUvnVMyMLhJqPdgVu5"], ["LIMIT", 1]]
[36m  GridFS Storage (2.0ms) [0m[32mUploaded file to key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (1.0ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: JnYSoaZUvnVMyMLhJqPdgVu5 (no)[0m
[36m  GridFS Storage (0.3ms) [0m[31mDeleted file from key: JnYSoaZUvnVMyMLhJqPdgVu5[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ztlhand83ot99w7c3b09zn1e267b"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 21:20:29.246881"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "ztlhand83ot99w7c3b09zn1e267b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: ztlhand83ot99w7c3b09zn1e267b (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJ6dGxoYW5kODNvdDk5dzdjM2IwOXpuMWUyNjdiIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cImdyZWV0aW5nLnR4dFwiIiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--b5a356bdfef1c9b8d05caa5c629faa18970fc4ad/greeting.txt" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"greeting"}
[36m  GridFS Storage (0.8ms) [0m[34mDownloaded file from key: ztlhand83ot99w7c3b09zn1e267b[0m
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "k7ahux5jct7o0jhgs69k067jdxjl"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 21:20:29.252078"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "k7ahux5jct7o0jhgs69k067jdxjl"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: k7ahux5jct7o0jhgs69k067jdxjl (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started PUT "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJrN2FodXg1amN0N28wamhnczY5azA2N2pkeGpsIiwiY2hlY2tzdW0iOiJscS9oWS9hZzRSakpuNVNMR1Z3N0VRPT0iLCJjb250ZW50X3R5cGUiOiJ0ZXh0L3BsYWluIiwiY29udGVudF9sZW5ndGgiOjE0fSwicHVyIjoiYmxvYl90b2tlbiJ9fQ==--c7367bf61b86a37da1c30c20e45fa32c77afb429" for 127.0.0.1 at 2025-12-10 16:20:29 -0500
Processing by ActiveStorage::GridfsController#update as HTML
  Parameters: {"encoded_token"=>"[FILTERED]"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "k7ahux5jct7o0jhgs69k067jdxjl"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: k7ahux5jct7o0jhgs69k067jdxjl (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
[36m  GridFS Storage (0.8ms) [0m[34mDownloaded file from key: k7ahux5jct7o0jhgs69k067jdxjl[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_updated
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.2ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "Old Title"], ["created_at", "2025-12-10 21:20:53.050908"], ["updated_at", "2025-12-10 21:20:53.050908"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/posts/1/edit" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered posts/edit.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 3.3ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#update as HTML
  Parameters: {"post"=>{"title"=>"Updated Title", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010b0929f8 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-24282-brm1i5.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Update Post", "id"=>"1"}
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "title" = ?, "updated_at" = ? WHERE "posts"."id" = ?[0m  [["title", "Updated Title"], ["updated_at", "2025-12-10 21:20:53.096431"], ["id", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "f6ialg5v9i88jfpdhojr6hnkd85l"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 21:20:53.105757"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 21:20:53.106103"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:53.106282"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "f6ialg5v9i88jfpdhojr6hnkd85l"], ["LIMIT", 1]]
[36m  GridFS Storage (5.3ms) [0m[32mUploaded file to key: f6ialg5v9i88jfpdhojr6hnkd85l (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:53.118320"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 303 See Other in 26ms (ActiveRecord: 0.6ms (12 queries, 1 cached) | GC: 3.5ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 1.0ms | GC: 0.1ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.1ms)
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: f6ialg5v9i88jfpdhojr6hnkd85l (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJmNmlhbGc1djlpODhqZnBkaG9qcjZobmtkODVsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjEyNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--154bc0e343d3c590155c39913de4c384eefc8a24/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.2ms) [0m[34mGenerated URL for file at key: f6ialg5v9i88jfpdhojr6hnkd85l (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJmNmlhbGc1djlpODhqZnBkaG9qcjZobmtkODVsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjEyNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--154bc0e343d3c590155c39913de4c384eefc8a24/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJmNmlhbGc1djlpODhqZnBkaG9qcjZobmtkODVsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjEyNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--154bc0e343d3c590155c39913de4c384eefc8a24/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.1ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJmNmlhbGc1djlpODhqZnBkaG9qcjZobmtkODVsIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjEyNVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--154bc0e343d3c590155c39913de4c384eefc8a24/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (0.9ms) [0m[34mDownloaded file from key: f6ialg5v9i88jfpdhojr6hnkd85l[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
EngineIntegrationTest: test_engine_allows_a_post_to_be_created
--------------------------------------------------------------
Started GET "/posts/new" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered posts/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered posts/new.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/posts" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#create as HTML
  Parameters: {"post"=>{"title"=>"My First Post", "file"=>#<ActionDispatch::Http::UploadedFile:0x000000010b6fa200 @tempfile=#<Tempfile:/var/folders/cq/_qlt5s9x3rvf43ws2vtdpw3m0000gp/T/RackMultipart20251210-24282-5ucy33.txt>, @content_type="text/plain", @original_filename="sample.txt", @headers="content-disposition: form-data; name=\"post[file]\"; filename=\"sample.txt\"\r\ncontent-type: text/plain\r\ncontent-length: 57\r\n">}, "commit"=>"Create Post"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPost Create (0.1ms)[0m  [1m[32mINSERT INTO "posts" ("title", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["title", "My First Post"], ["created_at", "2025-12-10 21:20:53.133480"], ["updated_at", "2025-12-10 21:20:53.133480"]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "s862xyoeapknb3kueausxyxpzwxr"], ["filename", "sample.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 57], ["checksum", "RdsCIPklTfaThTOsyR3pvQ=="], ["created_at", "2025-12-10 21:20:53.134540"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "Post"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-12-10 21:20:53.134761"]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:53.134913"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "s862xyoeapknb3kueausxyxpzwxr"], ["LIMIT", 1]]
[36m  GridFS Storage (6.9ms) [0m[32mUploaded file to key: s862xyoeapknb3kueausxyxpzwxr (checksum: RdsCIPklTfaThTOsyR3pvQ==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[36mPost Update (0.0ms)[0m  [1m[33mUPDATE "posts" SET "updated_at" = ? WHERE "posts"."id" = ?[0m  [["updated_at", "2025-12-10 21:20:53.143195"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/posts/1
Completed 302 Found in 11ms (ActiveRecord: 0.5ms (11 queries, 0 cached) | GC: 0.2ms)
Started GET "/posts/1" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Post"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendered posts/_post.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered posts/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992/sample.txt?disposition=attachment" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::Blobs::RedirectController#show as TEXT
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--95c1eafa21a38d910f4b1be5eef738f630417992", "filename"=>"sample"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: s862xyoeapknb3kueausxyxpzwxr (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzODYyeHlvZWFwa25iM2t1ZWF1c3h5eHB6d3hyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjE0NloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--d0822d049c1c424795d56598ae88071b19bd3863/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
[36m  GridFS Storage (0.1ms) [0m[34mGenerated URL for file at key: s862xyoeapknb3kueausxyxpzwxr (http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzODYyeHlvZWFwa25iM2t1ZWF1c3h5eHB6d3hyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjE0NloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--d0822d049c1c424795d56598ae88071b19bd3863/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt)[0m
Redirected to http://www.example.com/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzODYyeHlvZWFwa25iM2t1ZWF1c3h5eHB6d3hyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjE0NloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--d0822d049c1c424795d56598ae88071b19bd3863/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt
Completed 302 Found in 0ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJzODYyeHlvZWFwa25iM2t1ZWF1c3h5eHB6d3hyIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cInNhbXBsZS50eHRcIjsgZmlsZW5hbWUqPVVURi04JydzYW1wbGUudHh0IiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJleHAiOiIyMDI1LTEyLTEwVDIxOjI1OjUzLjE0NloiLCJwdXIiOiJibG9iX2tleSJ9fQ==--d0822d049c1c424795d56598ae88071b19bd3863/sample.txt?content_type=text%2Fplain&disposition=attachment%3B+filename%3D%22sample.txt%22%3B+filename%2A%3DUTF-8%27%27sample.txt" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"content_type"=>"text/plain", "disposition"=>"attachment; filename=\"sample.txt\"; filename*=UTF-8''sample.txt", "encoded_key"=>"[FILTERED]", "filename"=>"sample"}
[36m  GridFS Storage (1.2ms) [0m[34mDownloaded file from key: s862xyoeapknb3kueausxyxpzwxr[0m
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_without_integrity
---------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (3.8ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (0.0ms) [0m[32mUploaded file to key: nynjDCMQya4rzqtUGcwGoan7 (checksum: H1yIugmHOto4ENGxvf9/Zw==)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: nynjDCMQya4rzqtUGcwGoan7 (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: nynjDCMQya4rzqtUGcwGoan7[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_nonexistent_key
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.8ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: XuHiJ22tra87ATGkHcB5shAc[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_existing
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: fxiQijAneB7Xanga1EXpUqQn (yes)[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: fxiQijAneB7Xanga1EXpUqQnnonsense (no)[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting
--------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.3ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: fxiQijAneB7Xanga1EXpUqQn (no)[0m
[36m  GridFS Storage (0.4ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_in_chunks
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.1ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "TNC3yFRbkAPweQT876r9SyAL"], ["LIMIT", 1]]
[36m  GridFS Storage (38.1ms) [0m[32mUploaded file to key: TNC3yFRbkAPweQT876r9SyAL[0m
[36m  GridFS Storage (30.2ms) [0m[34mDownloaded file from key: TNC3yFRbkAPweQT876r9SyAL[0m
[36m  GridFS Storage (34.1ms) [0m[34mDownloaded file from key: TNC3yFRbkAPweQT876r9SyAL[0m
[36m  GridFS Storage (2.6ms) [0m[31mDeleted file from key: TNC3yFRbkAPweQT876r9SyAL[0m
[36m  GridFS Storage (1.2ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_deleting_by_prefix
------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.4ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.6ms) [0m[32mUploaded file to key: a/a/a[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/a/b"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: a/a/b[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "a/b/a"], ["LIMIT", 1]]
[36m  GridFS Storage (1.4ms) [0m[32mUploaded file to key: a/b/a[0m
[36m  GridFS Storage (2.0ms) [0m[31mDeleted files by key prefix: a/a/[0m
[36m  GridFS Storage (0.3ms) [0m[34mChecked if file exists at key: a/a/a (no)[0m
[36m  GridFS Storage (0.4ms) [0m[34mChecked if file exists at key: a/a/b (no)[0m
[36m  GridFS Storage (0.5ms) [0m[34mChecked if file exists at key: a/b/a (yes)[0m
[36m  GridFS Storage (0.6ms) [0m[31mDeleted file from key: a/a/a[0m
[36m  GridFS Storage (0.5ms) [0m[31mDeleted file from key: a/a/b[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: a/b/a[0m
[36m  GridFS Storage (1.4ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading
-----------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.5ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (1.6ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_uploading_with_integrity
------------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "7NrLoPLR1mnXkCGfvQjAauD7"], ["LIMIT", 1]]
[36m  GridFS Storage (1.8ms) [0m[32mUploaded file to key: 7NrLoPLR1mnXkCGfvQjAauD7 (checksum: sijgElrNmNQBpuz2xn8X7Q==)[0m
[36m  GridFS Storage (1.0ms) [0m[34mDownloaded file from key: 7NrLoPLR1mnXkCGfvQjAauD7[0m
[36m  GridFS Storage (1.9ms) [0m[31mDeleted file from key: 7NrLoPLR1mnXkCGfvQjAauD7[0m
[36m  GridFS Storage (1.5ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------------------------
ActiveStorage::Service::GridFSServiceTest: test_downloading_partially
---------------------------------------------------------------------
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "fxiQijAneB7Xanga1EXpUqQn"], ["LIMIT", 1]]
[36m  GridFS Storage (2.7ms) [0m[32mUploaded file to key: fxiQijAneB7Xanga1EXpUqQn[0m
[36m  GridFS Storage (1.3ms) [0m[31mDeleted file from key: fxiQijAneB7Xanga1EXpUqQn[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_POST_update_returns_success
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "dnbtvxh4ls1a7qvvpktmfavu331o"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 21:20:53.288279"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "dnbtvxh4ls1a7qvvpktmfavu331o"], ["LIMIT", 1]]
[36m  GridFS Storage (1.7ms) [0m[32mUploaded file to key: dnbtvxh4ls1a7qvvpktmfavu331o (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started PUT "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkbmJ0dnhoNGxzMWE3cXZ2cGt0bWZhdnUzMzFvIiwiY2hlY2tzdW0iOiJscS9oWS9hZzRSakpuNVNMR1Z3N0VRPT0iLCJjb250ZW50X3R5cGUiOiJ0ZXh0L3BsYWluIiwiY29udGVudF9sZW5ndGgiOjE0fSwicHVyIjoiYmxvYl90b2tlbiJ9fQ==--14c2167af374949d211d80617daaf9d2817fc45e" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::GridfsController#update as HTML
  Parameters: {"encoded_token"=>"[FILTERED]"}
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "dnbtvxh4ls1a7qvvpktmfavu331o"], ["LIMIT", 1]]
[36m  GridFS Storage (1.5ms) [0m[32mUploaded file to key: dnbtvxh4ls1a7qvvpktmfavu331o (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Completed 204 No Content in 2ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
[36m  GridFS Storage (1.1ms) [0m[34mDownloaded file from key: dnbtvxh4ls1a7qvvpktmfavu331o[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------------------------
ActiveStorage::Gridfs::GridfsControllerTest: test_GET_show_returns_file_content
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "j3cliuct237ldbglr97xj436n74k"], ["filename", "greeting.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "gridfs"], ["byte_size", 14], ["checksum", "lq/hY/ag4RjJn5SLGVw7EQ=="], ["created_at", "2025-12-10 21:20:53.295419"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."key" = ? LIMIT ?[0m  [["key", "j3cliuct237ldbglr97xj436n74k"], ["LIMIT", 1]]
[36m  GridFS Storage (1.3ms) [0m[32mUploaded file to key: j3cliuct237ldbglr97xj436n74k (checksum: lq/hY/ag4RjJn5SLGVw7EQ==)[0m
Started GET "/rails/active_storage/gridfs/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJqM2NsaXVjdDIzN2xkYmdscjk3eGo0MzZuNzRrIiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cImdyZWV0aW5nLnR4dFwiIiwiY29udGVudF90eXBlIjoidGV4dC9wbGFpbiJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--359bc5b58d6627195bac5bd143508d7ea881dfbc/greeting.txt" for 127.0.0.1 at 2025-12-10 16:20:53 -0500
Processing by ActiveStorage::GridfsController#show as TEXT
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"greeting"}
[36m  GridFS Storage (0.7ms) [0m[34mDownloaded file from key: j3cliuct237ldbglr97xj436n74k[0m
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
